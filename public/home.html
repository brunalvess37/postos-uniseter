<!DOCTYPE html>
<html lang="pt-BR">
<head>

<!-- üî• Impede cache antigo -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Postos UNISETER</title>

<!-- Clerk Autentica√ß√£o -->
<script async crossorigin="anonymous"
src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
data-clerk-publishable-key="pk_test_bHVja3ktc3RpbmtidWctODUuY2xlcmsuYWNjb3VudHMuZGV2JA"></script>

<!-- CSS com anti-cache -->
<link rel="stylesheet" href="style.css?v=202501">

<style>
body{
  display:none;                 /* üîê anti-flash */
  font-family: Arial, sans-serif;
  text-align:center;
  padding:20px;
}
header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
h1{ font-size:24px; margin:0; }

.menu-grid{
  display:grid;
  grid-template-columns: repeat(2,1fr);
  gap:18px;
  margin-top:25px;
}
.menu-card{
  background:#0354a6; color:white; padding:18px; border-radius:12px;
  box-shadow:0 3px 8px rgba(0,0,0,.2);
  font-size:15px; font-weight:bold;
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  transition:.2s; cursor:pointer;
}
.menu-card:hover{ transform:scale(1.05); opacity:.9; }
.menu-card img{ width:42px; margin-bottom:6px; }

@media(max-width:600px){
  .menu-grid{ grid-template-columns:1fr 1fr; }
}

button.logout-btn{
  background:#eee; border:1px solid #ccc; border-radius:8px;
  padding:6px 10px; font-size:13px; cursor:pointer;
}
</style>
</head>

<body>

<script>
document.addEventListener("DOMContentLoaded", async ()=>{

   const adminEmail = "brunalvess@hotmail.com";
   const c = window.Clerk;

   await c.load();

   // üîê Se n√£o estiver logado ‚Üí vai para login
   if(!c.user) return location.href="/signin.html";

   // üîê Exibe bot√£o ADMIN s√≥ para voc√™
   const adminCard = document.getElementById("admin-card");
   if(c.user.primaryEmailAddress.emailAddress === adminEmail){
      adminCard.style.display="flex";
   }else{
      adminCard.style.display="none";
   }
  document.body.style.display = "block";
});

// üîì Logout
async function sair(){
   const c = window.Clerk;
   await c.load();
   await c.signOut();
   location.href="/signin.html";
}
</script>

<header>
  <h1>POSTOS UNISETER</h1>
  <button class="logout-btn" onclick="sair()">Sair</button>
</header>

<p style="color:#333;font-size:14px;margin-top:0;">
  Sistema de visitas, gest√£o e planejamento
</p>

<div class="menu-grid">

  <div class="menu-card" onclick="location='app.html'">
    <img src="https://img.icons8.com/ios-filled/100/search.png">
    Buscar Postos
  </div>

  <div class="menu-card" onclick="location='rota.html'">
    <img src="https://img.icons8.com/ios-filled/100/route.png">
    Rota do Dia
  </div>

  <div class="menu-card" onclick="location='relatorio.html'">
    <img src="https://img.icons8.com/ios-filled/100/pdf.png">
    Gerar Relat√≥rio
  </div>

  <!-- ‚úÖ ALTERA√á√ÉO √öNICA: ABRE MY MAPS EM NOVA ABA -->
  <div class="menu-card"
       onclick="window.open(
         'https://www.google.com/maps/d/u/0/embed?mid=1_NCpd7e1T7DrGrnydOutQAoVHz3_tfQ&ehbc=2E312F&noprof=1',
         '_blank'
       )">
    <img src="https://img.icons8.com/ios-filled/100/car.png">
    Mapa
  </div>

  <!-- üîí S√≥ aparece para voc√™ -->
  <div class="menu-card" id="admin-card" onclick="location='admin.html'">
    <img src="https://img.icons8.com/ios-filled/100/upload.png">
    Atualizar Planilha
  </div>

  <div class="menu-card" onclick="alert('Em breve ‚Äî Estat√≠sticas e Insights!')">
    <img src="https://img.icons8.com/ios-filled/100/combo-chart.png">
    Relat√≥rios Avan√ßados
  </div>

</div>

</body>
</html>
