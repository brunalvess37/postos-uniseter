<!DOCTYPE html>
<html lang="pt-BR">
<head>

<!-- ğŸ”¥ Impede cache antigo -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Rota â€” Postos UNISETER</title>

<!-- Clerk Login -->
<script async crossorigin="anonymous"
src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
data-clerk-publishable-key="pk_test_bHVja3ktc3RpbmtidWctODUuY2xlcmsuYWNjb3VudHMuZGV2JA"></script>

<script>
document.addEventListener("DOMContentLoaded", async ()=>{
    const c = window.Clerk;
    await c.load();

    if(!c.user) return location.href="/signin.html";
});
</script>

<link rel="stylesheet" href="style.css?v=202501">

<!-- Bibliotecas -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="pdfmake.min.js?v=202501"></script>
<script src="vfs_fonts.js?v=202501"></script>

<!-- Scripts da rota -->
<script src="pdf-rota.js?v=202501"></script>
<script src="rota.js?v=202501"></script>

<style>
#rota-info{ margin:10px;font-size:14px;color:#333; }
#rota-lista .card{ padding:10px;border:1px solid #ddd;margin:6px;border-radius:8px; }
#mapa{ width:100%;max-height:350px;background:#eee;margin-top:10px; }
button{ margin:4px;padding:8px 12px;font-size:14px; }
</style>

</head>
<body>

<header>
  <button onclick="location='home.html'">â† Voltar</button>
  <h2 style="margin:0;">Rota â€” Postos UNISETER</h2>
</header>

<p id="rota-info"></p>
<div id="rota-lista"></div>

<hr>

<button onclick="ordenarRota()">ğŸ“ Otimizar rota</button>
<button onclick="salvarRota()">ğŸ’¾ Salvar rota</button>
<button onclick="limparRota()">ğŸ—‘ Limpar rota</button>
<button onclick="abrirNoWaze()">ğŸš— Abrir no Waze</button>
<button onclick="gerarPDFRota()">ğŸ“„ PDF da rota</button>

<hr>

<button onclick="toggleMapa()">ğŸ—º Mostrar / Ocultar mapa</button>
<div id="mapa" style="height:0; overflow:hidden; transition:.3s"></div>

</body>
</html>
